---
layout: post
title:  "elixir, spark, 수다왕"
date:   2016-01-14 01:30:00 +0900
categories: spark
---

# 1
작년에 심심풀이로 단톡방에서 수다왕을 찾아보려고 로그 분석을 시도했다. 아이폰에서 대화록 백업을 메일로 발송한 후 대화명을 키로 잡아서 행 수를 센다. 앱에서 여러줄을 보내면 두번째 줄부터 시간과 이름이 없어져서 분석할 때 위에서부터 쭉 돌면서 바로 윗줄은 누가 말했는지 판단할 전역변수가 하나 필요했다. 파이썬을 가지고 만들었다.

# 2
지난주 주말엔 또 수다왕을 찾으려고 아이폰으로 메일을 발송한 후에 elixir 를 가지고 분석을 시작했다. 편의성이 좋은 언어고 개성이 만점이다. 클래스도 없고 전역변수도 없다. 전역변수를 어찌할까 고민고민 하다가 행 별로 채팅인지 기타 메세지인지 분류만 하고 멈췄다.

# 3
이번주엔 apache spark를 보기 시작했다. 보다보니 예전에 하던 작업을 모두 추상화 해 둔 것 같다. input, output은 만들어져 있는 걸 쓰고 우리는 데이터 변환만 신경쓰면 된다. 수다왕 찾기를 다시 짜봤는데 역시 RDD 내>에 전역변수가 하나 필요해서 객체를 하나 짜서 넣었다. 그외엔 별거 없이 map filter reduce 뿐. 핵심 코드는 몇줄 안된다. 짱좋다.

# 4
spark 사실 작년에 간단한 tech survey만 했었는데 그땐 로그 개수 적다고 아예 깊이 보지도 않았던 것 같다. 뭐든 두세배는 더 시간을 들여 봐야 겠다.
